<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Well Capture</title>
    <style>
      html, body {
        box-sizing: border-box;
        display: flow-root;
        height: 100%;
        margin: 0;
        padding: 0;
      }
    </style>
    <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-3.4.1.min.js"></script>
    <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-widgets-3.4.1.min.js"></script>
    <script type="text/javascript">
        Bokeh.set_log_level("info");
    </script>
  </head>
  <body>
    <div id="f78fc63e-0273-4d94-aff7-d360c5cbfb53" data-root-id="p2979" style="display: contents;"></div>
  
    <script type="application/json" id="bef1ed41-2d3b-44bc-b333-3365fdfeab5a">
      {"cba0234f-74e7-45ca-9d30-4dbf55677c7e":{"version":"3.4.1","title":"Bokeh Application","roots":[{"type":"object","name":"Column","id":"p2979","attributes":{"children":[{"type":"object","name":"Slider","id":"p2908","attributes":{"js_property_callbacks":{"type":"map","entries":[["change:value",[{"type":"object","name":"CustomJS","id":"p2978","attributes":{"args":{"type":"map","entries":[["src_dict",{"type":"map","entries":[["EarlyT",{"type":"object","name":"ColumnDataSource","id":"p2951","attributes":{"selected":{"type":"object","name":"Selection","id":"p2952","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p2953"},"data":{"type":"map","entries":[["dd",[]],["t",[]]]}}}],["LateT",{"type":"object","name":"ColumnDataSource","id":"p2954","attributes":{"selected":{"type":"object","name":"Selection","id":"p2955","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p2956"},"data":{"type":"map","entries":[["dd",[]],["t",[]]]}}}]]}],["sl_dict",{"type":"map","entries":[["Q",{"id":"p2908"}],["R",{"type":"object","name":"Slider","id":"p2909","attributes":{"js_property_callbacks":{"type":"map","entries":[["change:value",[{"id":"p2978"}]]]},"stylesheets":[{"type":"object","name":"InlineStyleSheet","id":"p2907","attributes":{"css":"div.bk-slider-title{\n                font-family: arial;\n                font-weight: bold;\n                font-size: 14pt;\n                color: #17648D;\n"}}],"width":800,"title":"Radius from Well (m)","start":1,"end":1000,"value":1}}],["b",{"type":"object","name":"Slider","id":"p2910","attributes":{"js_property_callbacks":{"type":"map","entries":[["change:value",[{"id":"p2978"}]]]},"stylesheets":[{"id":"p2907"}],"width":800,"title":"Aquifer thickness (m)","format":"0.00","start":1,"end":100,"value":20,"step":0.01}}],["T",{"type":"object","name":"Slider","id":"p2912","attributes":{"js_property_callbacks":{"type":"map","entries":[["change:value",[{"id":"p2978"}]]]},"stylesheets":[{"id":"p2907"}],"width":800,"title":"Aquifer Transmissivity (m\u00b2/s)","format":{"type":"object","name":"CustomJSTickFormatter","id":"p2911","attributes":{"code":"return (10**tick).toExponential(2).toString()"}},"start":-7,"end":0,"value":-2,"step":0.1}}],["Ss",{"type":"object","name":"Slider","id":"p2914","attributes":{"js_property_callbacks":{"type":"map","entries":[["change:value",[{"id":"p2978"}]]]},"stylesheets":[{"id":"p2907"}],"width":800,"title":"Specific Storage (1/m)","format":{"type":"object","name":"CustomJSTickFormatter","id":"p2913","attributes":{"code":"return (10**tick).toExponential(2).toString()"}},"start":-7,"end":0,"value":-4,"step":0.1}}],["Sy",{"type":"object","name":"Slider","id":"p2915","attributes":{"js_property_callbacks":{"type":"map","entries":[["change:value",[{"id":"p2978"}]]]},"stylesheets":[{"id":"p2907"}],"width":800,"title":"Specific Yield (dimensionless)","start":0.01,"end":0.5,"value":0.2,"step":0.01}}]]}],["f",{"type":"object","name":"Figure","id":"p2916","attributes":{"width":800,"height":800,"x_range":{"type":"object","name":"Range1d","id":"p2926","attributes":{"start":1,"end":10000000.0}},"y_range":{"type":"object","name":"Range1d","id":"p2927","attributes":{"start":0.01,"end":10}},"x_scale":{"type":"object","name":"LogScale","id":"p2928"},"y_scale":{"type":"object","name":"LogScale","id":"p2929"},"title":{"type":"object","name":"Title","id":"p2919","attributes":{"text":"Well capture zone of a pumping well","text_color":"#17648D","text_font":"arial","text_font_size":"16pt"}},"renderers":[{"type":"object","name":"GlyphRenderer","id":"p2963","attributes":{"data_source":{"id":"p2951"},"view":{"type":"object","name":"CDSView","id":"p2964","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p2965"}}},"glyph":{"type":"object","name":"Line","id":"p2960","attributes":{"x":{"type":"field","field":"t"},"y":{"type":"field","field":"dd"},"line_color":"blue"}},"nonselection_glyph":{"type":"object","name":"Line","id":"p2961","attributes":{"x":{"type":"field","field":"t"},"y":{"type":"field","field":"dd"},"line_color":"blue","line_alpha":0.1}},"muted_glyph":{"type":"object","name":"Line","id":"p2962","attributes":{"x":{"type":"field","field":"t"},"y":{"type":"field","field":"dd"},"line_color":"blue","line_alpha":0.2}}}},{"type":"object","name":"GlyphRenderer","id":"p2974","attributes":{"data_source":{"id":"p2954"},"view":{"type":"object","name":"CDSView","id":"p2975","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p2976"}}},"glyph":{"type":"object","name":"Line","id":"p2971","attributes":{"x":{"type":"field","field":"t"},"y":{"type":"field","field":"dd"},"line_color":"orange"}},"nonselection_glyph":{"type":"object","name":"Line","id":"p2972","attributes":{"x":{"type":"field","field":"t"},"y":{"type":"field","field":"dd"},"line_color":"orange","line_alpha":0.1}},"muted_glyph":{"type":"object","name":"Line","id":"p2973","attributes":{"x":{"type":"field","field":"t"},"y":{"type":"field","field":"dd"},"line_color":"orange","line_alpha":0.2}}}}],"toolbar":{"type":"object","name":"Toolbar","id":"p2925","attributes":{"tools":[{"type":"object","name":"PanTool","id":"p2940"},{"type":"object","name":"WheelZoomTool","id":"p2941","attributes":{"renderers":"auto"}},{"type":"object","name":"BoxZoomTool","id":"p2942","attributes":{"overlay":{"type":"object","name":"BoxAnnotation","id":"p2943","attributes":{"syncable":false,"level":"overlay","visible":false,"left":{"type":"number","value":"nan"},"right":{"type":"number","value":"nan"},"top":{"type":"number","value":"nan"},"bottom":{"type":"number","value":"nan"},"left_units":"canvas","right_units":"canvas","top_units":"canvas","bottom_units":"canvas","line_color":"black","line_alpha":1.0,"line_width":2,"line_dash":[4,4],"fill_color":"lightgrey","fill_alpha":0.5}}}},{"type":"object","name":"SaveTool","id":"p2948"},{"type":"object","name":"ResetTool","id":"p2949"},{"type":"object","name":"HelpTool","id":"p2950"}]}},"left":[{"type":"object","name":"LogAxis","id":"p2935","attributes":{"ticker":{"type":"object","name":"LogTicker","id":"p2936","attributes":{"num_minor_ticks":10,"mantissas":[1,5]}},"formatter":{"type":"object","name":"LogTickFormatter","id":"p2937"},"axis_label":"Drawdown (m)","axis_label_text_color":"#17648D","axis_label_text_font":"arial","axis_label_text_font_size":"14pt","axis_label_text_font_style":"bold","major_label_policy":{"type":"object","name":"AllLabels","id":"p2938"},"major_label_text_font":"arial","major_label_text_font_size":"12pt","major_label_text_font_style":"normal"}}],"below":[{"type":"object","name":"LogAxis","id":"p2930","attributes":{"ticker":{"type":"object","name":"LogTicker","id":"p2931","attributes":{"num_minor_ticks":10,"mantissas":[1,5]}},"formatter":{"type":"object","name":"LogTickFormatter","id":"p2932"},"axis_label":"Time (s)","axis_label_text_color":"#17648D","axis_label_text_font":"arial","axis_label_text_font_size":"14pt","axis_label_text_font_style":"bold","major_label_policy":{"type":"object","name":"AllLabels","id":"p2933"},"major_label_text_font":"arial","major_label_text_font_size":"12pt","major_label_text_font_style":"normal"}}],"center":[{"type":"object","name":"Grid","id":"p2934","attributes":{"axis":{"id":"p2930"}}},{"type":"object","name":"Grid","id":"p2939","attributes":{"dimension":1,"axis":{"id":"p2935"}}},{"type":"object","name":"Legend","id":"p2966","attributes":{"title_text_font":"arial","title_text_font_size":"14pt","title_text_font_style":"bold","label_text_color":"#17648D","label_text_font":"arial","label_text_font_size":"12pt","items":[{"type":"object","name":"LegendItem","id":"p2967","attributes":{"label":{"type":"value","value":"Computed drawdown by early Theis"},"renderers":[{"id":"p2963"}]}},{"type":"object","name":"LegendItem","id":"p2977","attributes":{"label":{"type":"value","value":"Computed drawdown by late Theis"},"renderers":[{"id":"p2974"}]}}]}}]}}]]},"code":"// js function equivalent to np.linspace\nfunction makeArr(startValue, stopValue, cardinality) {\n  var arr = [];\n  var step = (stopValue - startValue) / (cardinality - 1);\n  for (var i = 0; i &lt; cardinality; i++) {\n\tarr.push(startValue + (step * i));\n  }\n  return arr;\n}\n\nimport * as d3 from \"https://cdn.jsdelivr.net/npm/d3@7.9/+esm\"\nimport cephes from 'https://cdn.jsdelivr.net/npm/cephes@2.0.0/+esm'\nawait cephes.compiled\n\nexport default function({src_dict,sl_dict,f}){\n\t//collect slider values\n\tvar q = sl_dict['Q'].value\n\tvar tr = 10**sl_dict['T'].value\n\tvar b = sl_dict['b'].value\n\tvar r = sl_dict['R'].value\n\tvar ss = 10**sl_dict['Ss'].value\n\tvar sy = sl_dict['Sy'].value\n\t\n    //evaluate well function at 100 points along 1e-5 and 1e4 seconds\n\tvar w_u = makeArr(-5,4,100).map(x=&gt;cephes.expn(1,10**x))\n\t// same points, get inverse\n\tvar u_inv = makeArr(-5,4,100).map(x=&gt;1/10**x)\n\t//early curve term\n    var t_a_term = r**2 * ss * b / 4 / tr\n    console.log(ss)\n    //late curve term\n    var t_b_term = r**2 * sy / 4 / tr\n    \n    var s_term = q/(4*Math.PI*tr)\n    \n    var t_a = u_inv.map(x=&gt;x*t_a_term)\n    var t_b = u_inv.map(x=&gt;x*t_b_term)\n    var s = w_u.map(x=&gt;x*s_term &lt; 1e-2 ? 'nan' : x*s_term)\n    \n    //update the theis datasources\n    src_dict['EarlyT'].data={'t':t_a,'dd':s}\n    src_dict['LateT'].data={'t':t_b,'dd':s}\n    f.y_range.start = 0.01\n    f.y_range.end = d3.max(s)*10\n    f.x_range.start = 1\n    f.x_range.end = d3.max(t_a)*10\n    \n    \n}","module":true}}]]]},"stylesheets":[{"id":"p2907"}],"width":800,"title":"Pumping rate (m\u00b3/s)","format":"0.000","start":0,"end":0.2,"value":0,"step":0.001}},{"id":"p2909"},{"id":"p2910"},{"id":"p2912"},{"id":"p2914"},{"id":"p2915"},{"id":"p2916"}]}}]}}
    </script>
    <script type="text/javascript">
      (function() {
        const fn = function() {
          Bokeh.safely(function() {
            (function(root) {
              function embed_document(root) {
              const docs_json = document.getElementById('bef1ed41-2d3b-44bc-b333-3365fdfeab5a').textContent;
              const render_items = [{"docid":"cba0234f-74e7-45ca-9d30-4dbf55677c7e","roots":{"p2979":"f78fc63e-0273-4d94-aff7-d360c5cbfb53"},"root_ids":["p2979"]}];
              root.Bokeh.embed.embed_items(docs_json, render_items);
              }
              if (root.Bokeh !== undefined) {
                embed_document(root);
              } else {
                let attempts = 0;
                const timer = setInterval(function(root) {
                  if (root.Bokeh !== undefined) {
                    clearInterval(timer);
                    embed_document(root);
                  } else {
                    attempts++;
                    if (attempts > 100) {
                      clearInterval(timer);
                      console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
                    }
                  }
                }, 10, root)
              }
            })(window);
          });
        };
        if (document.readyState != "loading") fn();
        else document.addEventListener("DOMContentLoaded", fn);
      })();
    </script>
  </body>
</html>